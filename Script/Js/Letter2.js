const wishes = [
  "🌟 Ố la la lại là Thiệp nữa... 🌟",
  "Phải nói thật một điều với Kem là những ngày qua",
  "Ú đã suy nghĩ lên kế hoạch rất lâu và rất nhiều sự thay đổi đã được thực hiện ",
  "để có thể tạo nên một ngày sinh nhật thật đặc biệt cho Kem 🥳. ",
  "Tới thời điểm hiện tại thì hai ta ",
  "đã cùng nhau trải qua hơn 5 tháng bên cạnh nhau rồi, ",
  "cũng có nhiều khoảnh khắc vui buồn lẫn lộn",
  "nhưng Ú thấy những khoảnh khắc đó thật sự rất đáng giá và đã giúp ta hiểu nhau hơn. ",
  "Như trong bài hát 'Cơn mưa ngang qua' của Sơn Tùng M-TP có câu " ,
  "'Theo thời gian, những hạt mưa như nặng thêm, xóa đi kỉ niệm mặn nồng giữa chúng ta' ",
  "nhưng nghe những lời đó khiến Ú thấy ",
  "trong thời gian qua những giọt mưa chỉ làm cho kỉ niệm của hai chúng ta",
  "càng in thấm vào tâm trí và cũng khiến cho những khoảnh khắc bên nhau của hai đứa ",
  "càng đậm thêm như những giọt mưa thấm đẫm vào dần vậy đó 😚🤣. ",
  "Trong lúc ngồi xem lại các tấm ảnh và video của hai ta thì Ú đã nhận ra rằng ",
  "có rất nhiều khoảnh khắc đáng nhớ mà Ú đã không thể lưu lại được, " ,
  "nhưng may mắn thay có những tấm ảnh khiến Ú chỉ cần nhìn vào",
  "là đã như sống lại trong khoảnh khắc đó vậy.",
  "Ú nhớ ngày đầu tiên hai đứa chúng ta gặp nhau, lúc đó Kem còn chả  để ý đến Ú mấy ",
  "nhưng Ú đã để ý đến Kem rồi cơ 😆. ",
  "Rồi những ngày sau đó, Ú đã phải đấu tranh với chính mình ",
  "để có thể nói chuyện với Kem, Ú đã phải vượt qua rất nhiều nỗi sợ hãi và lo lắng ",
  "để có thể bắt chuyện với Kem. ",
  "Khi đã nói chuyện với kem được một thời gian rồi ",
  "thì Ú nhận ra rằng bản thân Ú rất muốn có Kem ở cạnh, ",
  "Ú đã rất vui khi nhận ra rằng Kem cũng có tình cảm với Ú.",
  "Sau những chuỗi ngày nói chuyện thì hai ta đã có buổi hẹn hò đầu tiên...",
  "Gì chứ, thường thì buổi hẹn hò đầu tiên của người khác tình tứ e thẹn ngại ngùng biết bao...",
  "Nhưng Ú với Kem thì lại cứ trò chuyện vô cùng thoải mái",
  "trừ vụ Ú làm mất chìa khóa xe thoi 😅.  ",
  "Ú tưởng như mọi người bảo Ú điên là điều hơi quá lời" ,
  "nhưng sau khi nghe tin Kem ở trên Hà Nội đợt gần tết buồn",
  "thì Ú sẵn sàng xách xe lên Hà Nội để gặp Kem.",
  "Nghĩ lại thì Ú thấy Ú điên thật, nhưng Ú không hối hận vì đã làm vậy. ",
  "Nếu Ú không làm vậy thì có lẽ Ú sẽ không có được những khoảnh khắc đáng nhớ với Kem như bây giờ. ",
  "Sau đó còn có buổi hẹn hò ở quê Kem vào ngày Tết nữa.  ",
  "Thú thực, mặc dù đã gặp nhau và đi chơi trên Hà Nội nhiều rồi...",
  "Nhưng lúc Ú qua quê Kem thì Ú vẫn thấy hồi hộp lắm. ",
  "Ú không biết Kem có thấy hồi hộp không nhưng Ú thì thấy rất vui khi được gặp Kem.",
  "Bùm 1 cái là cũng có khoảnh khắc nữa đáng nhớ vào những ngày đó. ",
  "Đó là hai kỉ niệm khiến Ú thấy vui và nhớ lắm.  ",
  "Sau đó thì là vô vàn những chuyến đi chơi và kỉ niệm đáng nhớ khác nữa...",
  "và những chuyến đi chơi đó đã giúp Ú và Kem hiểu nhau hơn. ",
  "Sau một thời gian dài bên nhau, Ú nhận ra rằng Kem là người rất đặc biệt với Ú. ",
  "Kem luôn giúp Ú cảm thấy thoải mái và vui vẻ mỗi khi ở bên cạnh.",
  "Kem là người mà Ú có  thể thoải mái chia sẻ mọi điều...",
  "từ những niềm vui nhỏ nhặt đến những nỗi buồn sâu sắc. ",
  "Cảm ơn Kem đã luôn ở bên cạnh Ú. " , 
  "Nhân dịp sinh nhật này, Ú muốn gửi đến Kem một món quà đặc biệt.",
  "Mong rằng mọi điều tốt đẹp nhất sẽ đến với Kem trong năm tới.  ",
  "Hãy luôn giữ nụ cười trên môi và đừng quên rằng Ú luôn ở đây ủng hộ Kem nhennnn. ",
  "Trong ngày đặc biệt này của Kem... ✨",
  "Ú muốn kem ghi nhớ nó... 🧠",
  "Vì nó đánh dấu nhiều điều quan trọng! 🎉",
  "Kem tuổi mới, có anh ngừi iu này! 💖",
  "Có những khoảnh khắc mới, niềm vui mới! 💫",
  "Nhưng trang web này á! 😞",
  "Nó chỉ hiển thị trong thời gian ngắn thoi... 😟",
  "Mà còn sợ nó có thể có khả năng mất nứa... 😖",
  "Nên để ú khiến cho những kỉ niệm mà ú nói trước đó... 😤",
  "Trở thành kỉ niệm ở dạng vật lý nhóo! 🤭",
];

function createStars() {
  const starsContainer = document.createElement("div");
  starsContainer.className = "stars";
  for (let i = 0; i < 200; i++) {
    const star = document.createElement("div");
    star.className = "star";
    star.style.width = `${Math.random() * 3}px`;
    star.style.height = star.style.width;
    star.style.left = `${Math.random() * 100}%`;
    star.style.top = `${Math.random() * 100}%`;
    star.style.setProperty("--duration", `${Math.random() * 3 + 1}s`);
    starsContainer.appendChild(star);
  }
  document.body.appendChild(starsContainer);
}

function createEmoji() {
  const emojis = ["💖", "⭐", "✨", "🎉", "🎂", "🎈", "🌸", "🌹", "💐", "❤️", "💗", "💕", "🍧", "🍨", "🍦", "🐼"];
  const emoji = document.createElement("div");
  emoji.className = "emoji";
  emoji.textContent = emojis[Math.floor(Math.random() * emojis.length)];
  emoji.style.left = Math.random() * window.innerWidth + "px";
  emoji.style.top = "-50px";
  document.body.appendChild(emoji);
  const animation = emoji.animate(
    [
      { transform: "translateY(0) rotate(0deg)" },
      {
        transform: `translateY(${window.innerHeight + 50}px) rotate(${Math.random() * 360}deg)`
      }
    ],
    {
      duration: 3000,
      easing: "linear"
    }
  );
  animation.onfinish = () => emoji.remove();
}

// function stopAllMusic() {
//   const audios = ["bgMusic"];
//   audios.forEach((id) => {
//     const audio = document.getElementById(id);
//     if (audio) {
//       audio.pause();
//       audio.currentTime = 0;
//     }
//   });
// }

function playAudio(audioId) {
  const audio = ["bgMusic"];
  if (audio) {
    audio.volume = 0.5;
    audio.play().catch((err) => console.log("Audio play failed:", err));
  }
}

let emojiInterval;

async function typeWriter(text) {
  const wishesElement = document.getElementById("wishes");
  wishesElement.style.opacity = 1;
  wishesElement.innerHTML = "";
  wishesElement.className = "wishes neon-text";
  for (let char of text) {
    wishesElement.innerHTML += char;
    await new Promise((resolve) => setTimeout(resolve, 37));
  }
  await new Promise((resolve) => setTimeout(resolve, 1000));
}

let isMuted = false;

const muteButton = document.getElementById("muteButton");
muteButton.addEventListener("click", () => {
  const audios = ["bgMusic"];
  isMuted = !isMuted;
  audios.forEach((id) => {
    const audio = document.getElementById(id);
    if (audio) {
      audio.muted = isMuted;
    }
  });
  muteButton.textContent = isMuted ? "🔇" : "🔊";
});

document.getElementById("startBtn").addEventListener("click", async () => {
  document.getElementById("startBtn").style.display = "none";
  document.getElementById("wishesContainer").classList.remove("hidden");

  const bgAudio = document.getElementById("bgMusic");
  bgAudio.muted = isMuted;
  try {
    const playPromise = bgAudio.play();
    if (playPromise !== undefined) {
      playPromise.catch((error) => {
        console.log("Audio play failed:", error);
      });
    }
  } catch (err) {
    console.log("Audio play failed:", err);
  }

  emojiInterval = setInterval(createEmoji, 300);
  for (let wish of wishes) {
    await typeWriter(wish);
  }
});

document.addEventListener("click", async function initAudio() {
  const audios = ["bgMusic"];
  for (let id of audios) {
    const audio = document.getElementById(id);
    try {
      await audio.play();
      audio.pause();
      audio.currentTime = 0;
    } catch (err) {
      console.log("Audio initialization failed:", err);
    }
  }
  document.removeEventListener("click", initAudio);
});

createStars();

let honey = document.getElementById("body");
function fullScreen() {
  honey.requestFullscreen();
}
